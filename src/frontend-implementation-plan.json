{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Allow replying to your own messages",
  "requirements": [
    {
      "id": "REQ-45",
      "summary": "Show the Reply action for the current user's own (non-optimistic) messages and ensure it sets the same reply-to context used for replying to other users.",
      "acceptanceCriteria": [
        "In a room, a message sent by the current user shows a visible Reply action in the same area where reactions/reply are displayed for other users' messages.",
        "Clicking Reply on the current user's own message sets the reply context and the composer shows the correct quoted/reply-to context for that message (same behavior as replying to someone else).",
        "The Reply action remains hidden/disabled for messages in 'sending' or 'failed' optimistic states (no regression to existing pending/failed UX).",
        "No backend changes are required for this feature; replying to own messages works using the existing replyTo mechanism already used for other messages."
      ],
      "file_operations": [
        {
          "path": "frontend/src/features/chat/components/MessageItem.tsx",
          "operation": "modify",
          "description": "Remove the UI-only restriction that hides the Reply button on isOwn messages, while keeping the existing guard that hides actions for optimistic 'sending'/'failed' messages. Ensure the Reply button remains in the same actions row (next to ReactionBar) and continues to call the existing onReply handler to set reply context."
        }
      ]
    }
  ]
}